# LIDLE

LIDLE - современное мобильное приложение маркетплейса на базе Flutter, предназначенное для покупки и продажи автомобилей и недвижимости. Приложение предоставляет удобный интерфейс для просмотра объявлений, управления профилями пользователей и обработки потоков аутентификации.

# Возможности

- **Система аутентификации**: Вход, регистрация, восстановление пароля с email верификацией
- **Объявления маркетплейса**: Просмотр объявлений об автомобилях и недвижимости с подробной информацией
- **Профили пользователей**: Управление личной панелью с избранным и объявлениями
- **Поиск и категории**: Продвинутый функционал поиска и категоризированный просмотр
- **Локальное хранилище**: Оффлайн хранение данных с использованием Hive
- **Адаптивный дизайн**: Оптимизирован для мобильных устройств с кастомными UI компонентами

# Установка

# Предварительные требования

- Flutter SDK (^3.9.2)
- Dart SDK (включен во Flutter)
- Android Studio или VS Code для разработки
- Android/iOS устройство или эмулятор

# Настройка

1. **Установите зависимости:**
   ```bash
   flutter pub get
   ```

2. **Запустите приложение:**
   ```bash
   flutter run
   ```

# Сборка для продакшена

**Android APK:**
```bash
flutter build apk --release
```

**iOS (на macOS):**
```bash
flutter build ios --release
```

# Архитектура

LIDLE следует подходу чистой архитектуры с использованием паттерна BLoC (Business Logic Component) для управления состоянием.

# Структура проекта

```
lib/
├── blocs/              # BLoC компоненты для управления состоянием
│   ├── auth/          # Логика аутентификации
│   ├── listings/      # Логика объявлений маркетплейса
│   ├── navigation/    # Логика нижней навигации
│   ├── profile/       # Логика профиля пользователя
│   └── password_recovery/  # Логика восстановления пароля
├── models/            # Модели данных
├── pages/             # UI экраны/страницы
├── services/          # Сервисы API и бизнес-логики
├── widgets/           # Переиспользуемые UI компоненты
├── constants.dart     # Константы приложения и теминг
├── hive_service.dart  # Сервис локального хранения
└── main.dart         # Точка входа в приложение
```

# Ключевые технологии

- **Flutter**: Кроссплатформенный мобильный фреймворк
- **BLoC Pattern**: Управление состоянием для предсказуемых обновлений UI
- **Hive**: NoSQL база данных для локального хранения данных
- **HTTP**: Коммуникация с REST API
- **Flutter SVG**: Поддержка векторной графики
- **Carousel Slider**: Функционал карусели изображений
- **Form Builder**: Продвинутая валидация форм

# Управление состоянием

Приложение использует множественные BLoC для управления различными аспектами состояния приложения:

- `AuthBloc`: Обрабатывает аутентификацию пользователей и управление сессиями
- `ListingsBloc`: Управляет данными объявлений маркетплейса
- `NavigationBloc`: Контролирует состояние нижней навигации
- `ProfileBloc`: Управляет данными профиля пользователя
- `PasswordRecoveryBloc`: Обрабатывает поток восстановления пароля

# Поток данных

1. **UI слой** (Pages/Widgets) → Отправляет события в BLoC
2. **Слой бизнес-логики** (BLoC) → Обрабатывает события и обновляет состояние
3. **Слой данных** (Services/Models) → Обрабатывает API вызовы и хранение данных
4. **UI слой** → Реагирует на изменения состояния и перестраивается


# Тестирование

Проект включает комплексный набор тестов для обеспечения качества кода и функциональности.

# Типы тестов

- **Unit-тесты**: Тестирование отдельных компонентов (модели, сервисы)
- **Widget-тесты**: Тестирование UI компонентов и виджетов
- **Integration-тесты**: Тестирование потоков взаимодействия между компонентами

# Запуск тестов

**Запуск всех тестов:**
```bash
flutter test
```

**Запуск конкретного файла с тестами:**
```bash
flutter test test/models_test.dart
flutter test test/category_card_test.dart
flutter test test/listing_card_test.dart
```

**Запуск тестов с покрытием:**
```bash
flutter test --coverage
```

**Запуск тестов в verbose режиме:**
```bash
flutter test -v
```

# Структура тестов

```
test/
├── models_test.dart              # Unit-тесты для моделей данных (6 тестов)
├── api_service_test.dart         # Unit-тесты для API сервиса (4 теста)
├── auth_service_test.dart        # Unit-тесты для сервиса аутентификации (9 тестов)
├── category_card_test.dart       # Widget-тесты для карточки категории (8 тестов)
├── listing_card_test.dart        # Widget-тесты для карточки объявления (20 тестов)
└── widget_test.dart              # Базовый smoke тест приложения (1 тест)
```


Тесты охватывают следующие компоненты:

- **Модели данных**: `Category`, `Listing` - конструкторы, валидация данных
- **Сервисы**: `ApiService`, `AuthService` - конфигурация, сигнатуры методов
- **UI компоненты**: `CategoryCard`, `ListingCard` - рендеринг, стилизация, адаптивность
- **Приложение**: Базовый smoke тест для проверки запуска


